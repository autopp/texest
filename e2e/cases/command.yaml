tests:
  - name: 'with succeeded command'
    command:
      - type: env
        name: TEXEST
      - "-"
    stdin:
      format: yaml
      value:
        tests:
          - command:
              - 'true'
    expect:
      status:
        eq: 0
      stderr:
        beEmpty: true
  - name: 'with failed command'
    command:
      - type: env
        name: TEXEST
      - "-"
    stdin:
      format: yaml
      value:
        tests:
          - command:
              - 'false'
    expect:
      status:
        eq: 1
      stderr:
        beEmpty: true
  - name: 'with stdin'
    command:
      - type: env
        name: TEXEST
      - "-"
    stdin:
      format: yaml
      value:
        tests:
          - command:
              - cat
            stdin: 'hello'
    expect:
      status:
        eq: 0
      stdout:
        eq: 'hello'
    teeStderr: true
